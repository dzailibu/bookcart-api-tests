# Book Cart API Automation

This repo contains API automation for the Book Cart system.  
[Book Cart API Swagger Documentation](https://bookcart.azurewebsites.net/swagger/index.html)

---

## Tech Stack

- **Python 3.x**
- **Pytest** for testing
- **Requests** for HTTP requests
- **Python Dotenv** for managing `.env` configuration
- **Logging** for test result and status tracking
- **Page Object Model (SOM-based API)** based API layers for better maintainability
- **Object-Oriented Programming (OOP)** principles for code structure and reusability

---

## Folder Structure

```
bookcart-api-tests/
â”‚
â”œâ”€â”€ api/             # API wrapper classes (UserAPI, BookAPI, etc.)
â”œâ”€â”€ config/          # Configuration files (config.py, .env)
â”œâ”€â”€ docs/            # Documentation: test_plan.md, test_cases.md, etc.
â”œâ”€â”€ helper/          # Reusable helper functions 
â”œâ”€â”€ tests/           # Test files and conftest.py
â”œâ”€â”€ utils/           # Shared utilities like Logger and future shared tools
â”œâ”€â”€ requirements.txt # Project dependencies
â””â”€â”€ README.md        # Project overview and instructions
```

---

## Auth Details

- **Authentication**: Bearer token (JWT) is used for authorization.
- The token is dynamically generated by registering and logging in a test user via the `/api/User` and `/api/Login` endpoints.
- Sensitive data, such as the base URL and token (if needed), are managed via the `.env` file.

---

## Setup Instructions

### 1. Clone the Repo & Navigate

```bash
git clone https://github.com/dzailibu/bookcart-api-tests.git
cd bookcart-api-tests
```

### 2. Create Virtual Environment (Optional)

```bash
python -m venv venv
source venv/bin/activate  # or venv\Scripts\activate on Windows
```

### 3. Install Dependencies

```bash
pip install -r requirements.txt
```

---

## How to Run Tests

Run all tests:

```bash
pytest -v tests/
```

### Run Smoke Tests Only

```bash
pytest -v -m smoke
```

---

## Test Logs

Logs are saved to `test_run.log` in the directory where pytest is run (root folder for above run examples).

---

## Test Types

- **Smoke Tests**: Core user journey (Login â†’ Add to cart â†’ Checkout â†’ View Orders).
- **Positive Tests**: Valid input expected to succeed.
- **Negative Tests**: Invalid input, missing fields, or incorrect auth.

---

## Documentation Included

- `docs/test_plan.md`
- `docs/test_cases.md`
- `docs/smoke_test_cases.md`
- `README.md` (youâ€™re reading it ðŸ˜Š)

---

## Limitations

Currently, the API does not support user deletion, so the registered test users will remain in the system after test completion.

---

## To-Do

- **Request an endpoint from the API team** for user deactivation or deletion, allowing us to clean up test data after each test run (teardown).
- **Implement better user management**: e.g., reuse or create unique test users to reduce potential clutter in the system.
- **Implement `pytest_runtest_makereport`**: Capture and log the status (pass/fail) for each individual test.
- **Implement `pytest_sessionfinish`**: Capture and log a summary of the entire test sessionâ€™s outcome.
- **Update Logging Configuration**: Ensure the logs contain enough information (test name, outcome, failure reason) for easy analysis and reporting.

---

### Additional Notes

- **Test Strategy**: The tests are designed to validate core API functionality and ensure smooth operation in key user flows.
- **User Management**: Due to API limitations, user deletion is not supported. We plan to address this in future iterations.
